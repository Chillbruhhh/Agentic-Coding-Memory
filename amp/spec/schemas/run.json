{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Run",
  "allOf": [
    {"$ref": "base.json"},
    {
      "type": "object",
      "properties": {
        "type": {"const": "run"},
        "input_summary": {
          "type": "string",
          "description": "Summary of input/request"
        },
        "outputs": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "type": {
                "type": "string",
                "enum": ["file", "command", "response", "artifact"]
              },
              "content": {"type": "string"},
              "metadata": {"type": "object"}
            },
            "required": ["type", "content"]
          },
          "description": "Outputs produced"
        },
        "errors": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "message": {"type": "string"},
              "code": {"type": "string"},
              "context": {"type": "object"}
            },
            "required": ["message"]
          },
          "description": "Errors encountered"
        },
        "confidence": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Confidence score for the run"
        },
        "duration_ms": {
          "type": "integer",
          "description": "Execution duration in milliseconds"
        },
        "status": {
          "type": "string",
          "enum": ["running", "completed", "failed", "cancelled"],
          "description": "Run status"
        }
      },
      "required": ["input_summary", "status"]
    }
  ]
}
